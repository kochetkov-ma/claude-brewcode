# Report Template

Output location: `.claude/tasks/reviews/{TIMESTAMP}_{NAME}_report.md`

Naming convention:
- TIMESTAMP: YYYYMMDD_HHMMSS
- NAME: sanitized REVIEW_PROMPT (first 30 chars)

## Template

```markdown
# Code Review Report

> **Scope:** {REVIEW_PROMPT}
> **Quorum:** {G}-{N}-{M} ({G} groups x {N} agents, threshold {M})
> **Groups:** {GROUP_NAMES}
> **Total agents:** {G x N} = {TOTAL_AGENTS}
> **Generated:** {TIMESTAMP}
> **Critic:** {Enabled|Disabled}

## Summary

| Severity | P0 (Critic) | P1 (Confirmed) | P2 (Quorum) | P3 (Exception) | Total |
|----------|-------------|----------------|-------------|----------------|-------|
| Blocker | {N} | {N} | {N} | {N} | {N} |
| Critical | {N} | {N} | {N} | {N} | {N} |
| Major | {N} | {N} | {N} | {N} | {N} |
| Minor | {N} | {N} | {N} | {N} | {N} |
| **Total** | **{N}** | **{N}** | **{N}** | **{N}** | **{N}** |

---

## Priority 0: Critic Findings (missed by all reviewers)

> Only present when critic mode enabled (`-c`/`--critic`).

| # | Severity | File:Line | Category | Issue | Suggestion | Source |
|---|----------|-----------|----------|-------|------------|--------|
| 1 | Critical | `path:42-45` | security | Short description | Fix approach | Critic |

### P0-1: {Title}

**File:** `{path}:{lineStart}-{lineEnd}`
**Severity:** {severity} | **Category:** {category}
**Source:** Critic (Devil's Advocate) | **Verified:** DoubleCheck Critic | **Confidence:** {confidence}

**Description:**
{detailed_description}

**Why missed:**
{explanation_why_all_reviewers_missed_this}

**Suggestion:**
{suggestion}

### Critic Challenges

| # | Finding | Challenge Type | Reason |
|---|---------|---------------|--------|
| 1 | P1-3 | WRONG_CONFIRM | {reason} |

### Blind Spots

| # | Category | Note |
|---|----------|------|
| 1 | {category} | No findings in this area despite relevant code |

---

## Priority 1: Confirmed (Quorum + DoubleCheck)

| # | Severity | File:Line | Category | Issue | Suggestion | Consensus |
|---|----------|-----------|----------|-------|------------|-----------|
| 1 | Critical | `path:42-45` | security | Short description | Fix approach | 3/3 agents |

### P1-1: {Title}

**File:** `{path}:{lineStart}-{lineEnd}`
**Severity:** {severity} | **Category:** {category}
**Consensus:** {agent_count}/{total} agents | **Confidence:** {avg_confidence}

**Description:**
{detailed_description}

**Suggestion:**
{suggestion}

**Reported by:** {agent_list}

---

## Priority 2: Quorum Only (NOT DoubleCheck confirmed)

| # | Severity | File:Line | Category | Issue | Suggestion | Consensus |
|---|----------|-----------|----------|-------|------------|-----------|
| ... | ... | ... | ... | ... | ... | ... |

---

## Priority 3: Critical Without Quorum (Exceptions)

> These blocker/critical findings did not reach quorum but warrant attention.

| # | Severity | File:Line | Category | Issue | Agent |
|---|----------|-----------|----------|-------|-------|
| ... | ... | ... | ... | ... | ... |

---

## Statistics

| Metric | Value |
|--------|-------|
| Files reviewed | {COUNT} |
| Total findings (pre-quorum) | {COUNT} |
| Quorum passed | {COUNT} ({PERCENT}%) |
| DoubleCheck confirmed | {COUNT} ({PERCENT}%) |
| Discarded (no consensus) | {COUNT} |
| **Critic (when enabled)** | |
| Critic missed findings (raw) | {COUNT} |
| Critic missed findings (verified) | {COUNT} ({PERCENT}%) |
| Critic challenges (raw) | {COUNT} |
| Critic challenges (verified) | {COUNT} ({PERCENT}%) |
| Blind spots (raw / verified) | {COUNT} / {COUNT} |
| DoubleCheck Critic reject rate | {PERCENT}% |

## Agent Performance

| Agent | Findings | Confirmed | Rate |
|-------|----------|-----------|------|
| reviewer #1 | {N} | {N} | {PERCENT}% |
| reviewer #2 | {N} | {N} | {PERCENT}% |
| ... | ... | ... | ... |

---

*Generated by brewcode:review | Quorum: {G}-{N}-{M} | Critic: {Enabled|Disabled}*
```

## Final Response Format

**Without critic:**
```
Review complete. Found {TOTAL} issues ({BLOCKERS} blocker, {CRITICAL} critical, {MAJOR} major).

Priority breakdown:
- P1 (Confirmed): {COUNT} issues
- P2 (Quorum only): {COUNT} issues
- P3 (Exceptions): {COUNT} issues

Full report: .claude/tasks/reviews/{TIMESTAMP}_{NAME}_report.md
```

**With critic (`-c`):**
```
Review complete. Found {TOTAL} issues ({BLOCKERS} blocker, {CRITICAL} critical, {MAJOR} major).

Priority breakdown:
- P0 (Critic): {COUNT} issues â€” verified by DoubleCheck
- P1 (Confirmed): {COUNT} issues
- P2 (Quorum only): {COUNT} issues
- P3 (Exceptions): {COUNT} issues

Critic challenges: {COUNT} verdicts challenged ({ACCEPTED} accepted)
Blind spots: {COUNT} categories flagged

Full report: .claude/tasks/reviews/{TIMESTAMP}_{NAME}_report.md
```
